import machine, kooka
import time
import fonts
import math

multiplier = None
phase = None
i = None
x = None
y = None

Number = (bool, int, float)



# Initialise timer counters.
_timer0 = time.ticks_ms()

# On-start code, run once at start-up.
if True:
    # Draws a Lissajous figure
    # Button controllable wave multiplier
    multiplier = 3
    # Phase varies continuously in loop
    phase = 90

# Main loop code, run continuously.
while True:
    if time.ticks_diff(time.ticks_ms(), _timer0) >= 0:
        _timer0 += 0
        multiplier = multiplier % 6
        if multiplier == 0:
            multiplier = 1
        kooka.display.clear()
        kooka.display.setfont(fonts.mono8x8)
        kooka.display.text(str('Lissajous'), int(0), int(8), int(1))
        # Change count by to slow or to speed up
        for i in range(0, 361, 5):
            x = round(math.sin(i / 180.0 * math.pi) * 24 + 90)
            y = round(math.sin((((i + phase) * multiplier) % 360) / 180.0 * math.pi) * 24 + 35)
            kooka.display.pixel(int(x), int(y), int(1))
        phase = (phase if isinstance(phase, Number) else 0) + 1
        phase = phase % 360
        kooka.display.setfont(fonts.mono6x7)
        kooka.display.text(str('Multip:'), int(0), int(20), int(1))
        kooka.display.text(str(multiplier), int(50), int(20), int(1))
        kooka.display.text(str('C+ D-'), int(0), int(30), int(1))
        kooka.display.text(str('Phase:'), int(0), int(45), int(1))
        kooka.display.text(str(phase), int(42), int(45), int(1))
        kooka.display.text(str('A exit'), int(0), int(63), int(1))
    if kooka.button_a.was_pressed():
        raise SystemExit
    if kooka.button_c.was_pressed():
        multiplier = (multiplier if isinstance(multiplier, Number) else 0) + 1
    if kooka.button_d.was_pressed():
        multiplier = (multiplier if isinstance(multiplier, Number) else 0) + -1
    kooka.display.show()
    machine.idle()

# Generated Blockly XML follows
# <xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="9j4zn[E-:[vI/mX^pwG?">multiplier</variable><variable id="HVtgMiChHZC@2`gTs=lT">phase</variable><variable id="Xm^c]bZqY*[(crdSM6+:">i</variable><variable id="_J5N(tlC!g7RT(U=%/46">x</variable><variable id="vDve?5FpL5yEgwf7q^,P">y</variable></variables><block type="event_every_seconds" id="ZHO!p025j#R{+7~J6tg1" x="10" y="-50"><field name="T">0</field><statement name="DO"><block type="variables_set" id="H{~s]92@(n@`CDvXU1t5"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field><value name="VALUE"><block type="math_modulo" id="S-TmxBEWIS*R$R%-Eb(8"><value name="DIVIDEND"><block type="variables_get" id="53|agY^CO:@emBEvY|P^"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field></block></value><value name="DIVISOR"><block type="math_number" id="NQ_yt$-fo-/!S$KL1=Wo"><field name="NUM">6</field></block></value></block></value><next><block type="controls_if" id="Ag!4;6@YZ24bAo_[=FJh"><value name="IF0"><block type="logic_compare" id="k_(nw}+N$z#Y@SWV$MgD"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="Q4=-3r+ryJR:O6j1}Q-w"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field></block></value><value name="B"><block type="math_number" id="-waC+zn#v3e4E#``d^7r"><field name="NUM">0</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="z6-eI5]h|0_?LAU4R-aU"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field><value name="VALUE"><block type="math_number" id="e-{=XLK7:IE3qWjqA__:"><field name="NUM">1</field></block></value></block></statement><next><block type="display_clear" id="G@rLM;Fv8x5)p=E~{a=["><next><block type="display_setfont" id="TqQHLEps4amtruU2bHPE"><field name="FONT">mono8x8</field><next><block type="display_text" id="/X=#qsC0u~7^H:,/eqz3"><value name="VALUE"><shadow type="text" id="A3[C(9o7T+ZB2y0xym|}"><field name="TEXT">Lissajous</field></shadow></value><value name="X"><shadow type="math_number" id="4qQTGpd{``%):KZm@-l5"><field name="NUM">0</field></shadow></value><value name="Y"><shadow type="math_number" id="Xm%^m]QODcMf1HpTylPR"><field name="NUM">8</field></shadow></value><value name="C"><shadow type="math_number" id="EcRs74/MRU5*Q79FbmuF"><field name="NUM">1</field></shadow></value><next><block type="py_stmt" id="Qqe|Q@DUy-gjYGAqT!^v"><field name="STMT"># Change count by to slow or to speed up</field><next><block type="controls_for" id="2)8F}SY:|bl:!_r*@w]2"><field name="VAR" id="Xm^c]bZqY*[(crdSM6+:">i</field><value name="FROM"><block type="math_number" id="dYh;2._)}K6(Eu3:Xv_Y"><field name="NUM">0</field></block></value><value name="TO"><block type="math_number" id="XdYaX3ciK%4matAHTp4$"><field name="NUM">360</field></block></value><value name="BY"><block type="math_number" id="vZtG;g9-i~A%RjOCng82"><field name="NUM">5</field></block></value><statement name="DO"><block type="variables_set" id="4@.[^jj=eRj=NwR}@%vP"><field name="VAR" id="_J5N(tlC!g7RT(U=%/46">x</field><value name="VALUE"><block type="math_round" id="dC=sp;*fCrG;=^Nctz@0"><field name="OP">ROUND</field><value name="NUM"><block type="math_mult_add" id="pf][KB;Uz5M=gtJtumnm"><value name="A"><shadow type="math_number" id="`k0PTV/f;Ny!7#Tn{ZQH"><field name="NUM">1</field></shadow><block type="math_trig" id="+Ri_4hiH*77gLRM_;VSx"><field name="OP">SIN</field><value name="NUM"><block type="variables_get" id="sOV*$e8?m|xQ0oDZ[Dar"><field name="VAR" id="Xm^c]bZqY*[(crdSM6+:">i</field></block></value></block></value><value name="B"><shadow type="math_number" id="Y@?pqBB$)im|^njpp66f"><field name="NUM">2</field></shadow><block type="math_number" id="5X.vL]R*KslFC+N19EB_"><field name="NUM">24</field></block></value><value name="C"><shadow type="math_number" id="w4R{-G?!9V^[Q2APf|om"><field name="NUM">90</field></shadow></value></block></value></block></value><next><block type="variables_set" id="y-!(!A)W`6]zGCXrEc8S"><field name="VAR" id="vDve?5FpL5yEgwf7q^,P">y</field><value name="VALUE"><block type="math_round" id="`~(6;8PqC#O|yD)Sv0;U"><field name="OP">ROUND</field><value name="NUM"><block type="math_mult_add" id="sE.ugu+|4r}]DoZ;Mb{8"><value name="A"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_trig" id="MMTEz.RYhZ+Q#K|zUe|%"><field name="OP">SIN</field><value name="NUM"><block type="math_modulo" id="V#/2F-J7[Mk7u0^La}F$"><value name="DIVIDEND"><block type="math_arithmetic" id="Kr}TcEVk6Had^-2mnAUO"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="SESmPYMOi37qMj[Q+}7e"><field name="NUM">1</field></shadow><block type="math_arithmetic" id="~kVEO79NJlPVvZ+dUIzx"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="L6a;{=/z7oz?~m{51;)5"><field name="NUM">1</field></shadow><block type="variables_get" id="{$|Qey)b:q0iDJV5H{PV"><field name="VAR" id="Xm^c]bZqY*[(crdSM6+:">i</field></block></value><value name="B"><shadow type="math_number" id="b8%[5i~9*[[f$rzl6Y|!"><field name="NUM">1</field></shadow><block type="variables_get" id="xm@D,pVs)oZ6peoQD_X6"><field name="VAR" id="HVtgMiChHZC@2`gTs=lT">phase</field></block></value></block></value><value name="B"><shadow type="math_number" id="aq8M4.|u~Xv?BMP/`gM*"><field name="NUM">1</field></shadow><block type="variables_get" id="B,s`QJ]3Q1WGQ{Dlpf26"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field></block></value></block></value><value name="DIVISOR"><block type="math_number" id="2f8xL.,VL#{SE6PmnFD="><field name="NUM">360</field></block></value></block></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">2</field></shadow><block type="math_number" id="?dE@cdzG+]v-B(.`ACBy"><field name="NUM">24</field></block></value><value name="C"><shadow type="math_number" id="S:ONg#+!kI7#o)Q;,hye"><field name="NUM">35</field></shadow></value></block></value></block></value><next><block type="display_pixel" id="vU~74Ungcbh:wTt%MCu^"><value name="X"><shadow type="math_number" id="`mTkuSMoCFvrCR.eb%IA"><field name="NUM">0</field></shadow><block type="variables_get" id="SrP%eT^$FI@J4yC8Ih#|"><field name="VAR" id="_J5N(tlC!g7RT(U=%/46">x</field></block></value><value name="Y"><shadow type="math_number" id="8{oU$*1ib~q7vqAqXJjM"><field name="NUM">0</field></shadow><block type="variables_get" id="|7vqr-DK?Wf4JjXR!5)E"><field name="VAR" id="vDve?5FpL5yEgwf7q^,P">y</field></block></value><value name="C"><shadow type="math_number" id="]y8x;DK2|!c@I)rB?1oL"><field name="NUM">1</field></shadow></value></block></next></block></next></block></statement><next><block type="math_change" id="tB1:$)Rz`hL,rjPKFz5G"><field name="VAR" id="HVtgMiChHZC@2`gTs=lT">phase</field><value name="DELTA"><shadow type="math_number" id="Hz]`l$ZMXp,i}k^D88:D"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="4:1WztF+!Aw[y910~McL"><field name="VAR" id="HVtgMiChHZC@2`gTs=lT">phase</field><value name="VALUE"><block type="math_modulo" id="3nLDz,x!3EhzdI*Uqo#("><value name="DIVIDEND"><block type="variables_get" id=");[_.U5E]Ire1%%KVvk@"><field name="VAR" id="HVtgMiChHZC@2`gTs=lT">phase</field></block></value><value name="DIVISOR"><block type="math_number" id="CRynp9JDS+|hXI!|h2fm"><field name="NUM">360</field></block></value></block></value><next><block type="display_setfont" id="S*/R4pm:/56-Yx0F#]Gr"><field name="FONT">mono6x7</field><next><block type="display_text" id="~Rcwfx}4`TL?cD9nYNeU"><value name="VALUE"><shadow type="text" id="p^Gu7hOsTA!myqs;vso5"><field name="TEXT">Multip:</field></shadow></value><value name="X"><shadow type="math_number" id="wfcUb[2u)GV(4ibD5GX@"><field name="NUM">0</field></shadow></value><value name="Y"><shadow type="math_number" id="=;:x+D_nU-SV=T%Qy15|"><field name="NUM">20</field></shadow></value><value name="C"><shadow type="math_number" id="KV}W=83|Z`on6^ep;OZ;"><field name="NUM">1</field></shadow></value><next><block type="display_text" id="k}?UH:JTea5f$!-*?UIA"><value name="VALUE"><shadow type="text" id="M/@:~xQ0Se/?Jx]J{VDC"><field name="TEXT">Hello</field></shadow><block type="variables_get" id="0EHJGdew%HyqT)2{E:AW"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field></block></value><value name="X"><shadow type="math_number" id="r.~Qu9*uzd|HcUS(:2-_"><field name="NUM">50</field></shadow></value><value name="Y"><shadow type="math_number" id="IBIn[wguC-#Oo)K|v*%:"><field name="NUM">20</field></shadow></value><value name="C"><shadow type="math_number" id="j%6ojzA_Q_V6re,RFGi6"><field name="NUM">1</field></shadow></value><next><block type="display_text" id="#Q45WB(rj$2p2(.dzuOQ"><value name="VALUE"><shadow type="text" id=")Ebkbz[4)yBk.I*67}H#"><field name="TEXT">C+ D-</field></shadow></value><value name="X"><shadow type="math_number" id="SIhuO|C{GiFj}}!DS9:f"><field name="NUM">0</field></shadow></value><value name="Y"><shadow type="math_number" id="tO-M6H3#ul:|?IptJ+0O"><field name="NUM">30</field></shadow></value><value name="C"><shadow type="math_number" id="/n5wBy}e=7T|[;sOnZNt"><field name="NUM">1</field></shadow></value><next><block type="display_text" id="^~-$ATu5mtQAcGP2e@*r"><value name="VALUE"><shadow type="text" id="ijmvXl.ry-lO:7o?3|*6"><field name="TEXT">Phase:</field></shadow></value><value name="X"><shadow type="math_number" id="HheaW_}Zo3_J`W.a$gKb"><field name="NUM">0</field></shadow></value><value name="Y"><shadow type="math_number" id="f9n2XpAgY2?DX6+,EapQ"><field name="NUM">45</field></shadow></value><value name="C"><shadow type="math_number" id="S3@^3vs!_xYw1f`r=b0H"><field name="NUM">1</field></shadow></value><next><block type="display_text" id="wgt7Pajark)06voDt%#c"><value name="VALUE"><shadow type="text"><field name="TEXT">Hello</field></shadow><block type="variables_get" id="qz|+PVQnjOPT:+xkE*/("><field name="VAR" id="HVtgMiChHZC@2`gTs=lT">phase</field></block></value><value name="X"><shadow type="math_number" id="K+%tWh^8a,x,x+%_dEh#"><field name="NUM">42</field></shadow></value><value name="Y"><shadow type="math_number" id="XdiKGQw=2Cv/NZ|8VBla"><field name="NUM">45</field></shadow></value><value name="C"><shadow type="math_number" id=":nKl;zrN$,:Ew$y|25l*"><field name="NUM">1</field></shadow></value><next><block type="display_text" id="c{03-3o=zqep3#pRkakk"><value name="VALUE"><shadow type="text" id="#Kgh:qjGQmFe1`Xf4I=Z"><field name="TEXT">A exit</field></shadow></value><value name="X"><shadow type="math_number" id="OxKB8}4#ri;?)h$rLjQH"><field name="NUM">0</field></shadow></value><value name="Y"><shadow type="math_number" id="JX0:{{r-5y/YjqZeFQ^b"><field name="NUM">63</field></shadow></value><value name="C"><shadow type="math_number" id="`bTGjH;l9uYNDSM_H`}["><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="event_on_start" id="77U]}9UL|U6r:mwUH%SG" x="710" y="-30"><statement name="DO"><block type="py_stmt" id=":O{4ZJpxK+*UugyT@{Wl"><field name="STMT"># Draws a Lissajous figure</field><next><block type="py_stmt" id="xnaK^|(+|/WP_~/?9%l`"><field name="STMT"># Button controllable wave multiplier</field><next><block type="variables_set" id="Kh2pZX0u~T)*7Q6N9Qn!"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field><value name="VALUE"><block type="math_number" id="+1@svQt`T{(9WK~uPOK2"><field name="NUM">3</field></block></value><next><block type="py_stmt" id="t%#k]T?@*Z*t4rph9w#^"><field name="STMT"># Phase varies continuously in loop</field><next><block type="variables_set" id="9P,t3d.Q|{i*s=z4be1I"><field name="VAR" id="HVtgMiChHZC@2`gTs=lT">phase</field><value name="VALUE"><block type="math_number" id="8q6fpvcQx%[*j_Om+oK,"><field name="NUM">90</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="event_button_was_pressed" id=",*N,;vMo)(0x~?v$2vr[" x="730" y="410"><field name="BUTTON">kooka.button_a.was_pressed()</field><statement name="DO"><block type="exit_program" id="_No+/`1$JHhrB#)@/%lJ"></block></statement></block><block type="event_button_was_pressed" id="msLnnnd;f/B0k/Aes@|!" x="730" y="490"><field name="BUTTON">kooka.button_c.was_pressed()</field><statement name="DO"><block type="math_change" id="U,Mvr%FhAsI~?DD[+@={"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field><value name="DELTA"><shadow type="math_number" id="E84v#cppgRw@v{QM^l~6"><field name="NUM">1</field></shadow></value></block></statement></block><block type="event_button_was_pressed" id="5E~cAyf3qK.+A~_yeRs;" x="730" y="570"><field name="BUTTON">kooka.button_d.was_pressed()</field><statement name="DO"><block type="math_change" id="Xq}Fee@GQW8;k^/nJsvi"><field name="VAR" id="9j4zn[E-:[vI/mX^pwG?">multiplier</field><value name="DELTA"><shadow type="math_number" id="(7;OQiV*tx-,4.YVP(vk"><field name="NUM">-1</field></shadow></value></block></statement></block></xml>

import machine, kooka
import fonts
import time
import framebuf

# Describe this function...
def reset():
    kooka.display.clear()
    kooka.display.setfont(fonts.mono5x5)
    kooka.display.text(str('A-exit C-draw D-erase B-reset'), int(0), int(63), int(1))
    kooka.display.show()


kooka.display.clear()
kooka.display.setfont(fonts.mono6x7)
kooka.display.print('Tilt and Draw', show=0)
kooka.display.show()
time.sleep(2)
reset()

kooka.display.show()

# Main loop code, run continuously.
while True:
    if kooka.button_a.was_pressed():
        raise SystemExit
    if kooka.button_b.was_pressed():
        reset()
    if kooka.button_c.is_pressed():
        kooka.display.pixel(int(kooka.accel.get_xyz()[0] * -10 + 63), int(kooka.accel.get_xyz()[1] * 10 + 32), int(1))
    if kooka.button_d.is_pressed():
        kooka.display.blit(framebuf.FrameBuffer(bytearray(b"\x00\x00\x00\x00\x00\x00\x00\x00"), 8, 8, framebuf.MONO_HMSB), int(kooka.accel.get_xyz()[0] * -10 + 63), int(kooka.accel.get_xyz()[1] * 10 + 32))
    kooka.display.show()
    machine.idle()

# Generated Blockly XML follows
# <xml xmlns="https://developers.google.com/blockly/xml"><block type="event_button_was_pressed" id="2KFoQ9y7k$zjap8JnCA+" x="150" y="30"><field name="BUTTON">kooka.button_a.was_pressed()</field><statement name="DO"><block type="exit_program" id="A9JaC#{l|qpvBw*pK[jv"></block></statement></block><block type="event_button_was_pressed" id=")p8A7N@FABm$eC9EC|_3" x="550" y="30"><field name="BUTTON">kooka.button_b.was_pressed()</field><statement name="DO"><block type="procedures_callnoreturn" id="ldg3DhG-%hFiqb+^a],I"><mutation name="reset"></mutation></block></statement></block><block type="display_clear" id="xGSN8CF2slE~h7d-qWFX" x="150" y="110"><next><block type="display_setfont" id="54,M-};Z66o+02%+6@Ru"><field name="FONT">mono6x7</field><next><block type="display_print" id="u8(RZ|7jcn]djMV*+Qo3"><value name="VALUE"><shadow type="text" id="rDL^0ojH/z-vfh|iPOee"><field name="TEXT">Tilt and Draw</field></shadow></value><next><block type="display_show" id="8y1wT^QqNz]cV5An03yf"><next><block type="time_sleep" id="k{}|PaRKfiS?Mj4z9cE@"><value name="VALUE"><shadow type="math_number" id="86lemeZM/,p296T!h(x?"><field name="NUM">2</field></shadow></value><next><block type="procedures_callnoreturn" id="23{wEHgfa)lKLo^)Kal1"><mutation name="reset"></mutation></block></next></block></next></block></next></block></next></block></next></block><block type="procedures_defnoreturn" id=":}f|)#exW$zOq}Kt45Rc" x="570" y="150"><field name="NAME">reset</field><comment pinned="false" h="80" w="160">Describe this function...</comment><statement name="STACK"><block type="display_clear" id="ex}$kv,|=,ACGUwa,la%"><next><block type="display_setfont" id="AnnRw?9l[|)lSS;{HvBG"><field name="FONT">mono5x5</field><next><block type="display_text" id="E}bftzbrBBgsKifm.;{A"><value name="VALUE"><shadow type="text" id="zO?~4Hi[*u8U?9Y/#|px"><field name="TEXT">A-exit C-draw D-erase B-reset</field></shadow></value><value name="X"><shadow type="math_number" id="kLm2sNuJDSQs%~bq~2Y3"><field name="NUM">0</field></shadow></value><value name="Y"><shadow type="math_number" id="M?.Edi{;gZd[,z1MpU|~"><field name="NUM">63</field></shadow></value><value name="C"><shadow type="math_number" id="t8+n2pS}i#QQ~oRC~Cvi"><field name="NUM">1</field></shadow></value><next><block type="display_show" id="j9~Z63P?%6`O!!t:_Ejq"></block></next></block></next></block></next></block></statement></block><block type="event_button_is_pressed" id="U^_P+,z-.OzZ=nK1lmGx" x="150" y="310"><field name="BUTTON">kooka.button_c.is_pressed()</field><statement name="DO"><block type="display_pixel" id="O$@EF.RX=*+7Y5#K!#^Q"><value name="X"><shadow type="math_number" id=")]og0a}@pw{i=ooD#lEp"><field name="NUM">0</field></shadow><block type="math_mult_add" id="WaTLDudFP3aW7$o{aARp"><value name="A"><shadow xmlns="http://www.w3.org/1999/xhtml" type="math_number"><field name="NUM">1</field></shadow><block type="lsm303_accel_axis" id="_?Ya~1eeN-iz{n;u[cbO"><field name="LOCATION">internal</field><field name="AXIS">0</field></block></value><value name="B"><shadow type="math_number" id="Y4S.OR5Y_uF5$ndY,G@I"><field name="NUM">-10</field></shadow></value><value name="C"><shadow type="math_number" id="P-6(rIf/HPe2_,8D/k%T"><field name="NUM">63</field></shadow></value></block></value><value name="Y"><shadow type="math_number" id="z^IcyRKv~YWGEG8qGZ|9"><field name="NUM">0</field></shadow><block type="math_mult_add" id="pWQm;F#.*;Z[HK(wWfA8"><value name="A"><shadow xmlns="http://www.w3.org/1999/xhtml" type="math_number"><field name="NUM">1</field></shadow><block type="lsm303_accel_axis" id="#:!-!;$6?st92QN?NDAr"><field name="LOCATION">internal</field><field name="AXIS">1</field></block></value><value name="B"><shadow type="math_number" id="*C!Q6$wI!1IMH}6+V927"><field name="NUM">10</field></shadow></value><value name="C"><shadow type="math_number" id="Wln2`~U0HM2:;:sEwW{{"><field name="NUM">32</field></shadow></value></block></value><value name="C"><shadow type="math_number" id="xa92pvzpgVqF0p8UJI(+"><field name="NUM">1</field></shadow></value></block></statement></block><block type="event_button_is_pressed" id="U94|%IH2FGfy!5*~QMJI" x="150" y="470"><field name="BUTTON">kooka.button_d.is_pressed()</field><statement name="DO"><block type="display_blit" id="({TxFO`I23HL2Gfw=@.1"><field name="T">FALSE</field><value name="IMAGE"><block type="display_image" id="Lf#O`}s%/i2MD-H;tMEX"><field name="P00">FALSE</field><field name="P01">FALSE</field><field name="P02">FALSE</field><field name="P03">FALSE</field><field name="P04">FALSE</field><field name="P05">FALSE</field><field name="P06">FALSE</field><field name="P07">FALSE</field><field name="P10">FALSE</field><field name="P11">FALSE</field><field name="P12">FALSE</field><field name="P13">FALSE</field><field name="P14">FALSE</field><field name="P15">FALSE</field><field name="P16">FALSE</field><field name="P17">FALSE</field><field name="P20">FALSE</field><field name="P21">FALSE</field><field name="P22">FALSE</field><field name="P23">FALSE</field><field name="P24">FALSE</field><field name="P25">FALSE</field><field name="P26">FALSE</field><field name="P27">FALSE</field><field name="P30">FALSE</field><field name="P31">FALSE</field><field name="P32">FALSE</field><field name="P33">FALSE</field><field name="P34">FALSE</field><field name="P35">FALSE</field><field name="P36">FALSE</field><field name="P37">FALSE</field><field name="P40">FALSE</field><field name="P41">FALSE</field><field name="P42">FALSE</field><field name="P43">FALSE</field><field name="P44">FALSE</field><field name="P45">FALSE</field><field name="P46">FALSE</field><field name="P47">FALSE</field><field name="P50">FALSE</field><field name="P51">FALSE</field><field name="P52">FALSE</field><field name="P53">FALSE</field><field name="P54">FALSE</field><field name="P55">FALSE</field><field name="P56">FALSE</field><field name="P57">FALSE</field><field name="P60">FALSE</field><field name="P61">FALSE</field><field name="P62">FALSE</field><field name="P63">FALSE</field><field name="P64">FALSE</field><field name="P65">FALSE</field><field name="P66">FALSE</field><field name="P67">FALSE</field><field name="P70">FALSE</field><field name="P71">FALSE</field><field name="P72">FALSE</field><field name="P73">FALSE</field><field name="P74">FALSE</field><field name="P75">FALSE</field><field name="P76">FALSE</field><field name="P77">FALSE</field></block></value><value name="X"><shadow type="math_number" id="@^vl.aR,ItHz!J}F@ZPT"><field name="NUM">0</field></shadow><block type="math_mult_add" id="BmMvqmFU7Jqij7QEyKbt"><value name="A"><shadow xmlns="http://www.w3.org/1999/xhtml" type="math_number"><field name="NUM">1</field></shadow><block type="lsm303_accel_axis" id="r6=~]IEe@ou1.$-JZk|^"><field name="LOCATION">internal</field><field name="AXIS">0</field></block></value><value name="B"><shadow type="math_number" id="K6ZfrEe-`No)2buWHVi5"><field name="NUM">-10</field></shadow></value><value name="C"><shadow type="math_number" id="^0X-?@Xf]_hx/(o^|T5$"><field name="NUM">63</field></shadow></value></block></value><value name="Y"><shadow type="math_number" id="7)9LVG6cz+Xiq?J|XK%j"><field name="NUM">0</field></shadow><block type="math_mult_add" id="rB^]4+t9;[./0=E`AYAf"><value name="A"><shadow xmlns="http://www.w3.org/1999/xhtml" type="math_number"><field name="NUM">1</field></shadow><block type="lsm303_accel_axis" id="GZ6H3M-fHWd9#}o-5CNK"><field name="LOCATION">internal</field><field name="AXIS">1</field></block></value><value name="B"><shadow type="math_number" id="M?i^-M.IF*pI[`w0fG+9"><field name="NUM">10</field></shadow></value><value name="C"><shadow type="math_number" id="uU6!]s@|?zy1$@c6Tlo2"><field name="NUM">32</field></shadow></value></block></value></block></statement></block></xml>
